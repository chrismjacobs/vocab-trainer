webpackJsonp([23],{xJsL:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"app",data:function(){return{form:{email:"",password:""},show:!0,waiting:!0,msg:null,showEmail:!1,msgColor:"text-prime",adverts:["fhvs701"],report:""}},methods:{showModal:function(){this.$refs.success.show()},showReset:function(){this.$refs.reset.show()},showAlert:function(){this.$refs.fail.show()},hideModal:function(t){console.log("mode",t),"success"===t&&""===this.report?(this.$refs.success.hide(),this.$router.push("/account")):"success"===t?(this.$refs.success.hide(),this.$router.push("/login")):"register"===t?(this.$refs.fail.hide(),this.$router.push("/register")):"reset"===t?(console.log("passwordReset"),this.$refs.reset.hide(),this.$router.push("/resetpass")):(this.$refs.fail.hide(),this.msg=null,this.waiting=!0)},resetDirect:function(){this.$router.push("/reset")},onSubmit:function(t){t.preventDefault(),this.authenticate()},getLabel:function(){return localStorage.setItem("tokenReady",!0)?"Password Reset - Check Email for Temporary Password":null},onReset:function(t){var e=this;t.preventDefault(),this.form.email="",this.form.password="",this.show=!1,this.$nextTick(function(){e.show=!0})},authenticate:function(){var t=this;console.log(this.report),t.msgColor="text-prime",""!==this.report?(t.msg="WARNING - Vocab Trainer cannot be used with "+this.report+" browser. You must first switch to other browser (eg  Chrome / Safari / Brave) to use this webapp",t.msgColor="text-alert",t.report=!1,t.showModal()):this.form.email.includes("@")?(this.waiting=!1,this.$store.dispatch("login",{userData:this.form}).then(function(e){console.log("RESPONSE",e);var s=e.msg;t.msg=s,e.err?1===e.err?t.showAlert():2===e.err&&(localStorage.setItem("tokenReady",!1),console.log("showReset"),t.msgColor="text-warn",t.showReset()):t.showModal()})):(t.report="",t.msg="Your email should be the full email address",t.msgColor="text-alert",t.showModal())}},created:function(){localStorage.floatEmail&&(this.form.email=localStorage.floatEmail);var t=navigator.userAgent;t.includes("Line")&&(this.report="Line"),t.includes("Facebook")&&(this.report="Facebook")},beforeMount:function(){this.$store.getters.isAuthenticated&&this.$router.push("account")}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[t.waiting?s("b-card",{attrs:{header:"Login","header-bg-variant":"prime","header-text-variant":"cream","header-tag":"h3"},scopedSlots:t._u([{key:"footer",fn:function(){return[s("div",{staticClass:"mb-3"},[s("em",[s("a",{attrs:{href:"#"},on:{click:function(e){return t.$router.push("/register")}}},[t._v("Start New Account")])])]),t._v(" "),s("em",[s("a",{attrs:{href:"#"},on:{click:function(e){return t.resetDirect()}}},[t._v("Forgot Password")])]),t._v(" "),t.showEmail?s("div",[t._v("\n            If you have forgotten your password please contact vocab trainer for a new password\n            "),s("a",{attrs:{href:"cjx02121981@gmail.com"}},[t._v(" cjx02121981@gmail.com ")])]):t._e()]},proxy:!0}],null,!1,1381061125)},[""!==t.report?s("h5",{staticClass:"bg-warn text-cream"},[t._v(" If using "+t._s(t.report)+" browser, you cannot log in. Please switch to Chrome /Safari / Brave browser ")]):t._e(),t._v(" "),s("br"),t._v(" "),t.show?s("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[s("b-input-group",{attrs:{label:"Email:","label-for":"exampleInput1"}},[s("b-input-group-prepend",{attrs:{inline:"","is-text":""}},[s("b-icon",{attrs:{icon:"envelope"}})],1),t._v(" "),s("b-form-input",{attrs:{id:"exampleInput1",required:"",placeholder:"Enter Email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v("\n\n          "+t._s(t.getLabel())+"\n          "),s("b-input-group",{staticClass:"my-4",attrs:{label:"Email","label-for":"exampleInput2"}},[s("b-input-group-prepend",{attrs:{inline:"","is-text":""}},[s("b-icon",{attrs:{icon:"lock-fill"}})],1),t._v(" "),s("b-form-input",{attrs:{id:"exampleInput2",type:"password",required:"",placeholder:"Enter Password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),s("div",{staticClass:"d-flex justify-content-between"},[s("div",[s("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal1",modifiers:{modal1:!0}}],staticClass:"buttonDiv bg-warn px-3",staticStyle:{width:"100px"},attrs:{type:"submit"}},[s("b-icon-forward",{attrs:{variant:"cream","font-scale":"1.5"}})],1)])])],1):t._e()],1):s("div",{attrs:{align:"center"}},[s("h4",{staticClass:"text-prime"},[t._v(" Logging in ")]),t._v(" "),s("b-icon",{attrs:{icon:"three-dots",animation:"cylon",variant:"prime","font-scale":"6"}})],1),t._v(" "),s("b-modal",{ref:"success",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Logged In"}},[s("div",{staticClass:"d-block"},[s("h3",{class:t.msgColor},[t._v(" "+t._s(t.msg)+" ")]),t._v(" "),t.adverts.includes(t.$store.state.userProfile.classroom)?s("div",{staticClass:"p-3 bg-cream"},[s("img",{attrs:{src:"https://vocab-lms.s3-ap-northeast-1.amazonaws.com/public/afld.PNG",alt:"JUST LOGO",width:"100"}}),t._v(" "),s("a",{attrs:{href:"https://www.jinwen-english.com",target:"_blank"}},[s("h3",{staticClass:"text-safe"},[t._v("www.jinwen-english.com ")])])]):t._e()]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-prime text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.hideModal("success")}}},[t._v("Close")])]),t._v(" "),s("b-modal",{ref:"reset",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Password Reset"}},[s("div",{staticClass:"d-block"},[s("h3",{class:t.msgColor},[t._v(" "+t._s(t.msg)+" ")])]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-prime text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.hideModal("reset")}}},[t._v("Close")])]),t._v(" "),s("b-modal",{ref:"fail",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Problem Found"}},[s("div",{staticClass:"d-block"},[s("h3",[t._v(" "+t._s(t.msg)+" ")])]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-alert text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.hideModal("fail")}}},[t._v("Close")]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-info text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.hideModal("register")}}},[t._v("Join")])])],1)},staticRenderFns:[]},a=s("VU/8")(o,r,!1,null,null,null);e.default=a.exports}});
//# sourceMappingURL=23.e91548f657d304ba18ef.js.map