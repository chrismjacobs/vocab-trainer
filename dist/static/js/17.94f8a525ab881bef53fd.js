webpackJsonp([17],{Goic:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),o=s("Hrg7"),l=s("Lr5f"),n={name:"InstTests",components:{InstTable:o.default,InstAns:l.default},props:{group:String},data:function(){return{testDetails:{title:null,type:null,ans:"Set",list:[],status:0},msg:null,holder:[null,null],testHolder:null,results:null,errors:null,answers:null,answerData:[],showDetails:!1,selected:["",!0],testTypes:[{value:"E>C",text:"Eng>Ch"},{value:"C>E",text:"Ch>Eng"}],ansTypes:[{value:"Set",text:"Set"},{value:"Dict",text:"Dict"}],fields:[{key:"studentID",label:"ID",sortable:!0},{key:"user",label:"Name",sortable:!0},{key:"quizData",label:"Grade(%)",sortable:!0},{key:"time",label:"Time"},{key:"answers",label:"Answers"},{key:"delete",label:"Redo"}],fieldStats:[{key:"vocab",label:"Vocab",sortable:!0},{key:"errors",label:"Errors",sortable:!0}],allStats:null}},methods:{showModal:function(t){this.msg=t,this.$refs.success.show()},showAnsModal:function(t){this.$refs.answers.show()},showErrModal:function(t){this.errors=t,this.$refs.errors.show()},showAllModal:function(){for(var t in this.allStats=[{key:"studentID",label:"ID",sortable:!0,stickyColumn:!0,variant:"warn"},{key:"user",label:"Name",sortable:!0,stickyColumn:!0,variant:"warn"}],this.testRecords)this.allStats.push({key:t,label:t,sortable:!0});this.$refs.allResults.show()},deleteModal:function(t,e){this.holder=[t,e],t?(this.getResults(),this.$refs.reset.show()):this.$refs.delete.show()},showAlert:function(t){this.msg=t,this.$refs.fail.show()},hideModal:function(t){this.$refs[t].hide()},deleteMode:function(t){this.$refs[t].hide(),this.holder[0]?this.deleteAnswers():this.deleteQuiz()},deleteQuiz:function(){var t=this.holder[1];this.$refs.delete.hide(),this.showDetails=!1,this.results=!1,this.updateActive(t,!0),this.testRecords[t]&&(this.testHolder=a()({},this.testRecords),delete this.testHolder[t],this.$store.dispatch("instructorLogs",{group:this.classLoad,action:"setTests",testData:this.testHolder}),this.getResults())},deleteAnswers:function(){var t=this.holder[0],e=this.holder[1];console.log("delete",t,e);var s=this.studentResults.find(function(e){return e.uid===t});console.log(s);var i={};for(var a in s.quizData)i[a]=a===e?{answerData:[],score:0,time:0}:s.quizData[a];this.$store.dispatch("instructorLogs",{group:this.classLoad,action:"setStudent",student:t,studentTests:i}),this.getResults()},showAnswers:function(t,e,s){this.answerData=s,this.showAnsModal()},showResults:function(t){this.results===t?this.results=null:this.results=t},getTypeVar:function(t){return t?"safe":"warning"},getTypeCol:function(t){return{"E>C":"text-info","C>E":"text-warn",Set:"text-info",Dict:"text-warn",null:"bg-alert"}[t]},getCompleted:function(t){var e=this.studentResults,s=0;for(var i in e)e[i].quizData[t]&&(s+=1);return s},getScore:function(t,e){if(t){var s=t.score,i=t.answerData.length,a=this.testRecords[e].list.length,o=s/a*100,l=a/i*100;return[Math.round(o),Math.round(l),t.time]}return["-","-","-"]},updateActive:function(t,e){this.$store.dispatch("updateActive",{index:t,action:e})},getResults:function(){this.$store.dispatch("clearResults"),this.$store.dispatch("instructorLogs",{group:this.group,action:"getResults"})},getDetails:function(t){this.showDetails&&this.testDetails===this.testRecords[t]?(this.showDetails=!1,this.testDetails={title:null,type:null,list:[],status:0}):(this.results=null,this.showDetails=!0,this.results=!1,this.testDetails=this.testRecords[t])},copyDetails:function(t){this.testDetails={title:this.testRecords[t].title+"copy",type:null,list:this.testRecords[t].list},this.showDetails=!0,this.results=!1},newTest:function(){this.showDetails=!0,this.results=null,this.testDetails=a()({},{title:null,type:null,list:[]})},saveTest:function(){this.showDetails=!1,this.selected[0]="",this.testHolder=a()({},this.testRecords),this.testHolder[this.testDetails.title]=this.testDetails,this.$store.dispatch("instructorLogs",{group:this.classLoad,action:"setTests",testData:this.testHolder}),this.getResults()},filterTable:function(t,e){return"allwords"===e[0]||(""===e[0]?!!this.testDetails.list.includes(t.English):1!==e[0].length?!!t.English.includes(e[0].trim()):e[0]===t.English[0]||void 0)}},computed:{tableItems:function(){return this.$store.getters.makeList},activeQuiz:function(){return this.$store.state.instructor.activeQuiz},testRecords:function(){return this.$store.state.instructor.testRecords},classLoad:function(){return this.$store.state.instructor.classLoad},studentResults:function(){var t=this.$store.state.instructor.classRecords,e=this.$store.state.instructor.studentResults,s=[];if(e.length>0){var i=function(i){var a=e.find(function(t){return t.uid===i}),o={};a&&(o=a.quizData),s.push({uid:i,quizData:o,user:t[i].user,studentID:t[i].studentID})};for(var a in t)i(a)}return s},answerStats:function(){var t={};for(var e in this.studentResults)if(this.studentResults[e].quizData[this.errors]){var s=this.studentResults[e].quizData[this.errors].answerData;for(var i in s){var a=s[i].English;t[a]||(t[a]=0),-1===s[i].Score&&(t[a]+=1)}}var o=[];for(var l in t)o.push({vocab:l,errors:t[l]});return o},allResults:function(){var t=[];for(var e in this.studentResults){var s={};for(var i in s.user=this.studentResults[e].user,s.studentID=this.studentResults[e].studentID,console.log("stats",this.studentResults[e].quizData),this.testRecords){var a=this.studentResults[e].quizData[i];if(a){var o=a.score/this.testRecords[i].list.length*100;s[i]=Math.round(o)}else s[i]="-"}t.push(s)}return console.log("allResults",t),t}},created:function(){this.getResults()}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"instTests"}},[s("audio",{attrs:{id:"audio"}}),t._v(" "),s("div",{staticClass:"bg-white mt-0 p-0"},[s("div",{staticClass:"bg-grey p-2"},[s("b-row",[s("b-col",{attrs:{align:"right"}},[s("button",{staticClass:"buttonDiv bg-darkgrey text-cream px-3",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.showAllModal()}}},[t._v("\n                See all Results\n          ")]),t._v(" "),s("button",{staticClass:"buttonDiv bg-darkgrey text-cream px-3 ml-3",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.getResults()}}},[t._v("\n                Update\n          ")]),t._v(" "),s("button",{staticClass:"buttonDiv bg-warn text-cream px-3 ml-3",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.newTest()}}},[t._v("\n                New Test\n          ")])])],1)],1),t._v(" "),s("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),s("tbody",[t._l(t.testRecords,function(e,i){return[s("tr",{key:i},[s("th",{attrs:{scope:"row"}},[t._v(t._s(i))]),t._v(" "),s("td",{class:t.getTypeCol(e.type)},[t._v(t._s(e.type))]),t._v(" "),s("td",{class:t.getTypeCol(e.ans)},[t._v(t._s(e.ans))]),t._v(" "),s("td",[s("button",{staticClass:"buttonDiv bg-smoke text-prime px-3",staticStyle:{width:"60px"},on:{click:function(e){return t.showErrModal(i)}}},[t._v("\n                          "+t._s(e.list.length)+"\n                        ")])]),t._v(" "),s("td",[s("button",{staticClass:"buttonDiv bg-smoke text-prime px-3",staticStyle:{width:"60px"},on:{click:function(e){return t.showResults(i)}}},[t._v("\n                          "+t._s(t.getCompleted(i))+"\n                        ")])]),t._v(" "),s("td",[s("button",{staticClass:"buttonDiv bg-smoke text-safe px-3 mr-3",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.getDetails(i)}}},[s("b-icon-folder-plus",{attrs:{variant:"safe","font-scale":"1"}})],1)]),t._v(" "),s("td",[i in t.activeQuiz?s("button",{staticClass:"buttonDiv bg-warning px-3",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.updateActive(i)}}},[s("b-icon",{attrs:{icon:"check"}})],1):s("button",{staticClass:"buttonDiv bg-smoke px-3",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.updateActive(i)}}},[s("b-icon",{attrs:{icon:"check"}})],1)]),t._v(" "),s("td",[s("button",{staticClass:"buttonDiv bg-smoke text-warn px-3 mr-3 ",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.copyDetails(i)}}},[s("b-icon-collection",{attrs:{variant:"warn","font-scale":"1"}})],1)]),t._v(" "),s("td",[s("button",{staticClass:"buttonDiv bg-smoke px-3 mr-3",staticStyle:{width:"60px"},on:{click:function(e){return t.deleteModal(null,i)}}},[s("b-icon",{attrs:{variant:"alert","font-scale":"1",icon:"trash-fill"}})],1)])]),t._v(" "),s("transition",{key:i+"1",attrs:{name:"tableboard"}},[t.results===i?s("tr",[s("td",{attrs:{colspan:"9"}},[s("b-table",{attrs:{small:"","sticky-header":"500px",striped:"",hover:"",items:t.studentResults,fields:t.fields,"show-empty":"",fixed:"","head-variant":"dark"},scopedSlots:t._u([{key:"cell(quizData)",fn:function(e){return[t._v("\n                              "+t._s(t.getScore(e.item.quizData[i],i)[0])+"\n                          ")]}},{key:"cell(time)",fn:function(e){return[t._v("\n                              "+t._s(t.getScore(e.item.quizData[i],i)[2])+"\n                          ")]}},{key:"cell(answers)",fn:function(e){return[e.item.quizData[i]&&0!==t.getScore(e.item.quizData[i],i)[0]?s("button",{staticClass:"buttonDiv bg-grey px-2",on:{click:function(s){return t.showAnswers(e.item.uid,i,e.item.quizData[i].answerData)}}},[s("b-icon-filter-left",{attrs:{variant:"cream","font-scale":"1"}})],1):t._e()]}},{key:"cell(delete)",fn:function(e){return[e.item.quizData[i]&&0!==t.getScore(e.item.quizData[i],i)[0]?s("button",{staticClass:"buttonDiv bg-alert px-2",on:{click:function(s){return t.deleteModal(e.item.uid,i)}}},[s("b-icon",{attrs:{variant:"cream","font-scale":"1",icon:"arrow-clockwise"}})],1):t._e()]}}],null,!0)})],1)]):t._e()])]})],2)])]),t._v(" "),t.showDetails?s("div",[s("div",{staticClass:"mt-2 bg-darkgrey p-2"},[s("b-row",[s("b-col",[s("h3",{staticClass:"text-cream"},[t._v(" Test Details: "+t._s(t.testDetails.title)+" ")]),t._v(" "),t.testRecords[t.testDetails.title]?t._e():s("b-input-group",{attrs:{label:"Test Title:","label-for":"exampleInput1"}},[s("b-input-group-prepend",{attrs:{inline:"","is-text":""}},[s("b-icon",{attrs:{icon:"filter-left"}})],1),t._v(" "),s("b-form-input",{attrs:{id:"exampleInput1",required:"",placeholder:"Enter Test Name"},model:{value:t.testDetails.title,callback:function(e){t.$set(t.testDetails,"title",e)},expression:"testDetails.title"}})],1)],1),t._v(" "),s("b-col",{staticClass:"text-cream"},[s("h3",[t._v(" Count: "+t._s(t.testDetails.list.length)+" ")])]),t._v(" "),s("b-col",{staticClass:"text-cream"},[s("b-form-radio-group",{attrs:{id:"btn-radios-2",options:t.testTypes,buttons:"","button-variant":t.getTypeVar(t.testDetails.type),name:"radio-btn-outline"},model:{value:t.testDetails.type,callback:function(e){t.$set(t.testDetails,"type",e)},expression:"testDetails.type"}})],1),t._v(" "),s("b-col",{staticClass:"text-cream"},[s("b-form-radio-group",{attrs:{id:"btn-radios-3",options:t.ansTypes,buttons:"","button-variant":t.getTypeVar(t.testDetails.ans),name:"radio-btn-outline-2"},model:{value:t.testDetails.ans,callback:function(e){t.$set(t.testDetails,"ans",e)},expression:"testDetails.ans"}})],1),t._v(" "),s("b-col",{attrs:{align:"right"}},[s("button",{staticClass:"buttonDiv bg-warning text-cream px-3",staticStyle:{width:"auto",height:"auto"},on:{click:function(e){return t.saveTest()}}},[s("b-icon",{attrs:{icon:"cloud-upload","font-scale":"2"}}),t._v(" SAVE\n              ")],1)])],1),t._v(" "),s("b-row",{staticClass:"mt-2"},[s("b-col",[s("b-input-group",{attrs:{label:"Vocab:","label-for":"exampleInput2"}},[s("b-input-group-prepend",{attrs:{inline:"","is-text":""}},[s("b-icon",{attrs:{icon:"grid3x2-gap"}})],1),t._v(" "),s("b-form-input",{attrs:{id:"exampleInput2",placeholder:"Search Vocab"},model:{value:t.selected[0],callback:function(e){t.$set(t.selected,0,e)},expression:"selected[0]"}})],1)],1)],1)],1),t._v(" "),s("div",[s("InstTable",{attrs:{selected:t.selected,list:t.testDetails.list,mode:"instructor"}})],1)]):t._e(),t._v(" "),s("b-modal",{ref:"success",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Success"}},[s("div",{staticClass:"d-block"},[s("h3",[t._v(" "+t._s(t.msg)+" ")])]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-prime text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.hideModal("success")}}},[t._v("Close")])]),t._v(" "),s("b-modal",{ref:"delete",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Delete"}},[s("div",{staticClass:"d-block"},[s("h3",[t._v(" You are about to delete a record. Are you sure you want to delete? ")])]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-alert text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.hideModal("delete")}}},[t._v("No")]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-safe text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.deleteMode("delete")}}},[t._v("Yes")])]),t._v(" "),s("b-modal",{ref:"reset",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Reset"}},[s("div",{staticClass:"d-block"},[s("h3",[t._v(" You are about to reset a students quiz. Are you sure you want to reset? ")])]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-alert text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.hideModal("reset")}}},[t._v("No")]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-safe text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.deleteMode("reset")}}},[t._v("Yes")])]),t._v(" "),s("b-modal",{ref:"fail",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Problem Found"}},[s("div",{staticClass:"d-block"},[s("h3",[t._v(" "+t._s(t.msg)+" ")])]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-alert text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.hideModal("fail")}}},[t._v("Close")])]),t._v(" "),s("b-modal",{ref:"answers",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Student Answers"}},[s("div",{staticClass:"d-block"},[s("div",{staticClass:"bg-white mt-0 p-0"},[s("InstAns",{attrs:{answerData:t.answerData,mode:"CE"}})],1)]),t._v(" "),s("button",{staticClass:"buttonDiv mt-3 bg-alert text-cream",staticStyle:{width:"60%"},on:{click:function(e){return t.hideModal("answers")}}},[t._v("Close")])]),t._v(" "),s("b-modal",{ref:"errors",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center","hide-footer":"",title:"Student Errors"}},[s("button",{staticClass:"buttonDiv mb-3 bg-alert text-cream",staticStyle:{width:"100%"},on:{click:function(e){return t.hideModal("errors")}}},[t._v("Close")]),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"d-block"},[s("b-table",{attrs:{small:"","sticky-header":"300px",striped:"",hover:"",items:t.answerStats,fields:t.fieldStats,"show-empty":"",fixed:"","head-variant":"dark"}})],1)]),t._v(" "),s("b-modal",{ref:"allResults",attrs:{"hide-header-close":"","no-close-on-esc":"","no-close-on-backdrop":"",align:"center",size:"xl","hide-footer":"",title:"Student Grades"}},[s("button",{staticClass:"buttonDiv mb-3 bg-alert text-cream",staticStyle:{width:"100%"},on:{click:function(e){return t.hideModal("allResults")}}},[t._v("Close")]),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"d-block"},[s("b-table",{attrs:{small:"","sticky-header":"300px",striped:"",hover:"",items:t.allResults,fields:t.allStats,"show-empty":"",fixed:"","head-variant":"dark"}})],1)])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Test")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Type")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Ans")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Vocab")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Results")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Edit")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Active")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Copy")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("Delete")])])])}]};var c=s("VU/8")(n,r,!1,function(t){s("j2Nt")},"data-v-0b39b209",null);e.default=c.exports},j2Nt:function(t,e){}});
//# sourceMappingURL=17.94f8a525ab881bef53fd.js.map